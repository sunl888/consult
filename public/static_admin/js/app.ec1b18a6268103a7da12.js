webpackJsonp([2,0],{0:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var a=n(8),r=s(a),o=n(101),i=s(o),u=n(67),l=s(u);n(55);var c=n(113),d=s(c),f=n(105),p=s(f),v=n(103),m=s(v),h=n(102),_=s(h),g=n(104),w=s(g);r.default.use(l.default),r.default.use(d.default);var b=new d.default({scrollBehavior:function(){return{y:0}},routes:[{path:"/home",name:"home",component:_.default,meta:{requiresAuth:!0},children:[{path:"issue",name:"issue",component:p.default},{path:"recycle_bin",name:"recycle_bin",component:w.default}]},{path:"/login",name:"login",component:m.default},{path:"*",redirect:"/home/issue"}]});b.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth})&&void 0===window.localStorage.token?n({path:"/login",query:{redirect:e.fullPath}}):n()}),new r.default(r.default.util.extend({router:b},i.default)).$mount("#app")},29:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return new o.default(function(s,a){n=n||{},void 0===n.body&&(n.body=n.options,n.options=void 0),u.default.http[t](e,n.body,n.options).then(function(e){s(e),void 0!==n.succCallBack&&n.succCallBack(e)},function(e){401!==e.status&&u.default.prototype.$message.error(e.data.message),a(e),void 0!==n.errCallBack&&n.errCallBack(e),a(e),void 0!==n.errCallBack&&n.errCallBack(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(154),o=s(r),i=n(8),u=s(i),l=n(63),c=s(l);u.default.use(c.default),u.default.http.options.root="/api",u.default.http.options.emulateJSON=!1,t.default={login:function(e,t){return a("admin/login","post",{body:{name:e,password:t}})},refreshToken:function(){return a("admin/refresh_token","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token}},succCallBack:function(e){window.localStorage.token=e.data.token}})},replay:function(e,t){return a("admin/comment/store","post",{options:{headers:{Authorization:"Bearer "+window.localStorage.token}},body:{issue_id:e,answer:t}})},realDeleteIssue:function(e){return a("admin/issue/delete","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token},params:{issue_id:e}}})},restoreIssue:function(e){return a("admin/issue/restore","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token},params:{issue_id:e}}})},deleteIssue:function(e){return a("admin/issue/softdelete","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token},params:{issue_id:e}}})},getTrashedIssueList:function(e,t){return a("admin/issue/list_softdel","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token},params:{offset:e,limit:t}}})},getTrashedIssueListCount:function(){return a("admin/soft_issues/softdelete_count","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token}}})},getIssueListCount:function(){return a("admin/issues/count","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token}}})},getIssueList:function(e,t){return a("admin/issue/lists","get",{options:{headers:{Authorization:"Bearer "+window.localStorage.token},params:{offset:e,limit:t}}})}}},39:function(e,t,n){var s,a;n(58),s=n(148);var r=n(108);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-4eb37aea",e.exports=s},40:function(e,t,n){var s,a;n(61),s=n(149);var r=n(111);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-771d0fe0",e.exports=s},54:function(e,t,n){e.exports=n.p+"static_admin/img/logo.9674ba0.png"},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t){},60:function(e,t){},61:function(e,t){},62:function(e,t){},101:function(e,t,n){var s,a;n(62),s=n(147);var r=n(112);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,e.exports=s},102:function(e,t,n){var s,a;n(57),s=n(150);var r=n(107);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-3b92fa79",e.exports=s},103:function(e,t,n){var s,a;n(60),s=n(151);var r=n(110);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-54b13b3f",e.exports=s},104:function(e,t,n){var s,a;n(56),s=n(152);var r=n(106);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-3b876f0e",e.exports=s},105:function(e,t,n){var s,a;n(59),s=n(153);var r=n(109);a=s=s||{},"object"!=typeof s.default&&"function"!=typeof s.default||(a=s=s.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,a._scopeId="data-v-4ebc9ccf",e.exports=s},106:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"issue view"},[t("Panel",{attrs:{title:"回收站"}},[t("div",{staticClass:"list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.issueList}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"title",label:"标题",sortable:"",width:"220","show-tooltip-when-overflow":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"created_at",sortable:"",label:"提问时间",width:"220"}}),e._v(" "),t("el-table-column",{attrs:{sortable:"",width:"120",label:"提问者"},inlineTemplate:{render:function(){var e=this,t=(e.$createElement,e._c);return t("span",[e._v(e._s(null!==e.row.wx_users?e.row.wx_users.name:"匿名"))])},staticRenderFns:[]}}),e._v(" "),t("el-table-column",{attrs:{prop:"description",sortable:"",label:"内容"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},inlineTemplate:{render:function(){var e=this,t=(e.$createElement,e._c);return t("span",[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.restore(e.row.id)}}},[e._v("恢复")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.deleteIssue(e.row.id)}}},[e._v("删除")])])},staticRenderFns:[]}})]),e._v(" "),t("div",{staticClass:"option"},[t("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.currentChange}})])])])])},staticRenderFns:[]}},107:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",[t("SideMenu"),e._v(" "),t("div",{staticClass:"content-app"},[t("router-view")])])},staticRenderFns:[]}},108:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"panel"},[t("header",[t("h2",[e._v(e._s(e.title))]),e._v(" "),t("div",{staticClass:"header_right"},[e._t("header")],!0)]),e._v(" "),t("div",{staticClass:"body"},[e._t("default")],!0)])},staticRenderFns:[]}},109:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"issue view"},[t("Panel",{attrs:{title:"问题列表"}},[t("div",{staticClass:"list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:e.issueList}},[t("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"title",label:"标题",sortable:"",width:"220","show-tooltip-when-overflow":""}}),e._v(" "),t("el-table-column",{attrs:{prop:"created_at",sortable:"",width:"220",label:"提问时间"}}),e._v(" "),t("el-table-column",{attrs:{sortable:"",width:"120",label:"提问者"},inlineTemplate:{render:function(){var e=this,t=(e.$createElement,e._c);return t("span",{class:{click_able:null!==e.row.wx_users},on:{click:function(t){e.showUserInfo(e.row.wx_users)}}},[e._v(e._s(null!==e.row.wx_users?e.row.wx_users.name:"匿名"))])},staticRenderFns:[]}}),e._v(" "),t("el-table-column",{attrs:{prop:"description",sortable:"",label:"内容"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"110"},inlineTemplate:{render:function(){var e=this,t=(e.$createElement,e._c);return t("span",[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.replay(e.row.id)}}},[e._v("回复")]),e._v(" "),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.deleteIssue(e.row.id)}}},[e._v("删除")])])},staticRenderFns:[]}})]),e._v(" "),t("div",{staticClass:"option"},[t("el-pagination",{staticClass:"page",attrs:{layout:"prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.currentChange}})])])]),e._v(" "),t("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.replayDialog,expression:"replayDialog"}],attrs:{title:e.currIssue.title,size:"tiny"},domProps:{value:e.replayDialog},on:{input:function(t){e.replayDialog=t}}},[t("p",[e._v(e._s(e.currIssue.description))]),e._v(" "),null==e.currIssue.comment?t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"answer"}],attrs:{type:"textarea",placeholder:"回复",rows:2},domProps:{value:e.answer},on:{input:function(t){e.answer=t}}}):t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.currIssue.comment.answer,expression:"currIssue.comment.answer"}],attrs:{type:"textarea",disabled:"",rows:2},domProps:{value:e.currIssue.comment.answer},on:{input:function(t){e.currIssue.comment.answer=t}}}),e._v(" "),e._v(" "),t("span",{staticClass:"dialog-footer",slot:"footer"},[t("el-button",{on:{click:function(t){e.replayDialog=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.replayDialog=!1,e.replayAnswer()}}},[e._v("回 复")])])]),e._v(" "),t("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.userInfoDialog,expression:"userInfoDialog"}],attrs:{title:e.currUser.name,size:"tiny"},domProps:{value:e.userInfoDialog},on:{input:function(t){e.userInfoDialog=t}}},[t("el-row",{staticClass:"user_info_body",attrs:{gutter:20}},[t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("ID")]),e._v(" "),t("span",[e._v(e._s(e.currUser.id))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("email")]),e._v(" "),t("span",[e._v(e._s(null!=e.currUser.email?e.currUser.email:"未填"))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("姓名")]),e._v(" "),t("span",[e._v(e._s(e.currUser.name))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("毕业学校")]),e._v(" "),t("span",[e._v(e._s(null!=e.currUser.old_school?e.currUser.old_school:"未填"))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("电话")]),e._v(" "),t("span",[e._v(e._s(e.currUser.phone))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("成绩")]),e._v(" "),t("span",[e._v(e._s(null!=e.currUser.course?e.currUser.course:"未填"))])]),e._v(" "),t("el-col",{staticClass:"item",attrs:{span:12}},[t("label",[e._v("地区")]),e._v(" "),t("span",[e._v(e._s(null!=e.currUser.province?e.currUser.province+" "+e.currUser.city+" "+e.currUser.area:"未填"))])])]),e._v(" "),t("span",{staticClass:"dialog-footer",slot:"footer"},[t("el-button",{on:{click:function(t){e.userInfoDialog=!1}}},[e._v("关 闭")])])])])},staticRenderFns:[]}},110:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",{staticClass:"login"},[t("div",{staticClass:"bg_img"}),e._v(" "),t("div",{staticClass:"login-box"},[t("div",{staticClass:"login-form"},[e._m(0),e._v(" "),t("div",{staticClass:"input-group"},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.uname,expression:"uname"}],attrs:{placeholder:"用户名"},domProps:{value:e.uname},on:{input:function(t){e.uname=t}}})]),e._v(" "),t("div",{staticClass:"input-group"},[t("el-input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"密码",type:"password"},domProps:{value:e.password},on:{input:function(t){e.password=t}},nativeOn:{keydown:function(t){e._k(t.keyCode,"enter",13)||e.login(t)}}})]),e._v(" "),t("div",[t("el-button",{attrs:{type:"primary login_btn"},on:{click:e.login}},[e._v("登录")])])])])])},staticRenderFns:[function(){var e=this,t=(e.$createElement,e._c);return t("legend",[t("h2",[e._v("账号密码登录")])])}]}},111:function(e,t,n){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("el-menu",{staticClass:"vertical_menu",attrs:{"default-active":"1",theme:"dark",router:!0,"default-active":e.currentPath}},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:n(54),alt:"招生咨询淮南师范学院后台"}})]),e._v(" "),t("el-submenu",{attrs:{index:"general"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-menu"}),e._v("基本")]),e._v(" "),t("el-menu-item",{attrs:{index:"/home/issue"}},[t("i",{staticClass:"el-icon-document"}),e._v("问题管理")]),e._v(" "),t("el-menu-item",{attrs:{index:"/home/recycle_bin"}},[t("i",{staticClass:"el-icon-delete2"}),e._v("回收站")])],!0)])},staticRenderFns:[]}},112:function(e,t){e.exports={render:function(){var e=this,t=(e.$createElement,e._c);return t("div",[t("router-view")])},staticRenderFns:[]}},147:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),r=s(a);t.default={name:"app",components:{SideMenu:r.default}}},148:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{title:{type:String,required:!0}}}},149:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{currentPath:""}},mounted:function(){this.currentPath=this.$route.path}}},150:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),r=s(a);t.default={name:"home",components:{SideMenu:r.default}}},151:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),r=s(a);t.default={data:function(){return{uname:"",password:""}},methods:{login:function(){var e=this;r.default.login(this.uname,this.password).then(function(t){window.localStorage.token=t.data.token,e.$router.push({name:"issue"})})}}}},152:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),r=s(a),o=n(39),i=s(o);t.default={components:{Panel:i.default},data:function(){return{loading:!1,issueList:[],total:0,pageSize:10,currentPage:0}},methods:{currentChange:function(e){this.currentPage=e,this.getTrashedIssueList((e-1)*this.pageSize,this.pageSize)},getTrashedIssueList:function(e,t){var n=this;r.default.getTrashedIssueList(e,t).then(function(e){n.issueList=e.data},function(s){401===s.status&&r.default.refreshToken().then(function(s){r.default.getTrashedIssueList(e,t).then(function(e){n.issueList=e.data}),r.default.getTrashedIssueListCount().then(function(e){n.total=Number(e.data)})})})},restore:function(e){var t=this;r.default.restoreIssue(e).then(function(e){t.$message("已恢复"),t.getTrashedIssueList((t.currentPage-1)*t.pageSize,t.pageSize),r.default.getTrashedIssueListCount().then(function(e){t.total=Number(e.data)})})},deleteIssue:function(e){var t=this;this.$confirm("此操作将永久删除该问题, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.default.realDeleteIssue(e).then(function(e){t.$message("已删除"),t.getTrashedIssueList((t.currentPage-1)*t.pageSize,t.pageSize),r.default.getTrashedIssueListCount().then(function(e){t.total=Number(e.data)})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}},mounted:function(){var e=this;r.default.getTrashedIssueListCount().then(function(t){e.total=Number(t.data)}),this.getTrashedIssueList(0,this.pageSize)}}},153:function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),r=s(a),o=n(39),i=s(o);t.default={components:{Panel:i.default},data:function(){return{loading:!1,issueList:[],total:0,answer:"",pageSize:10,replayDialog:!1,currIssue:{},currentPage:0,currUser:{},userInfoDialog:!1}},methods:{showUserInfo:function(e){null!==e&&(this.userInfoDialog=!0,this.currUser=e)},currentChange:function(e){this.currentPage=e,this.getIssueList((e-1)*this.pageSize,this.pageSize)},getIssueList:function(e,t){var n=this;r.default.getIssueList(e,t).then(function(e){n.issueList=e.data},function(s){401===s.status&&r.default.refreshToken().then(function(s){r.default.getIssueList(e,t).then(function(e){n.issueList=e.data}),r.default.getIssueListCount().then(function(e){n.total=Number(e.data)})})})},replay:function(e){this.answer="",this.replayDialog=!0;for(var t=this.issueList.length-1;t>=0;t--)if(this.issueList[t].id===e){this.currIssue=this.issueList[t];break}},replayAnswer:function(){var e=this;r.default.replay(this.currIssue.id,this.answer).then(function(t){e.$message("已回复"),e.getIssueList((e.currentPage-1)*e.pageSize,e.pageSize),r.default.getIssueListCount().then(function(t){e.total=Number(t.data)})})},deleteIssue:function(e){var t=this;r.default.deleteIssue(e).then(function(e){t.getIssueList((t.currentPage-1)*t.pageSize,t.pageSize),r.default.getIssueListCount().then(function(e){t.total=Number(e.data)}),t.$notify({title:"提示",message:"该问题已经被放入回收站，你可以在回收站中找回该问题。"})})}},mounted:function(){var e=this;r.default.getIssueListCount().then(function(t){e.total=Number(t.data)}),this.getIssueList(0,this.pageSize)}}}});
//# sourceMappingURL=app.ec1b18a6268103a7da12.js.map